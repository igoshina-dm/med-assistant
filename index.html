<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="format-detection" content="telephone=no">
  <title>–ú–µ–¥–ü–æ–º–æ—â–Ω–∏–∫</title>
  <style>
    * {
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    body {
      margin: 0;
      padding: 20px;
      /* background: #f9f9f9; */
      background: 
      /* linear-gradient(rgba(134, 213, 231, 0.7), rgba(23, 162, 248, 0.7)), */
      url('https://raw.githubusercontent.com/igoshina-dm/med-assistant/main/img/med.jpg') no-repeat center bottom / cover;
      color: #333;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: white;
      padding: 25px;
      border-radius: 14px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.07);
    }
    h1 {
      text-align: center;
      font-size: 24px;
      margin-bottom: 25px;
      color: #2c5282;
    }
    .step { display: none; }
    .step.active { display: block; }

    .btn {
      display: inline-block;
      margin: 6px 4px;
      padding: 10px 16px;
      background: #edf2f7;
      border: 1px solid #e2e8f0;
      border-radius: 10px;
      cursor: pointer;
      font-size: 15px;
      text-align: center;
    }
    .btn.active, .btn.selected {
      background: #4299e1;
      color: white;
    }
    .btn-wide {
      width: 100%;
      padding: 14px;
      font-size: 16px;
      margin-top: 20px;
    }
    .btn-secondary {
      background: #e2e8f0;
      color: #4a5568;
    }

    .result {
      margin-top: 20px;
      padding: 18px;
      background: #f0f9ff;
      border-left: 4px solid #3182ce;
      border-radius: 8px;
    }

    .warning {
      font-size: 12px;
      color: #e53e3e;
      margin-top: 20px;
      font-style: italic;
      text-align: center;
    }

    .back-btn {
      margin-top: 20px;
      background: #cbd5e0 !important;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ü©∫ –ú–µ–¥–ü–æ–º–æ—â–Ω–∏–∫</h1>
    <p style="text-align: center; color: #666;">–í—ã–±–µ—Ä–∏—Ç–µ –≤–æ–∑—Ä–∞—Å—Ç ‚Üí —Å–∏–º–ø—Ç–æ–º—ã ‚Üí –ø–æ–ª—É—á–∏—Ç–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é</p>

    <!-- –®–∞–≥ 1: –í–æ–∑—Ä–∞—Å—Ç -->
    <div class="step active" id="step-age">
      <h3>1. –ö–æ–º—É –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å?</h3>
      <div style="text-align: center; margin-top: 15px;">
        <button class="btn" onclick="selectAge('adult')">–í–∑—Ä–æ—Å–ª–æ–º—É</button>
        <button class="btn" onclick="selectAge('child')">–†–µ–±—ë–Ω–∫—É</button>
      </div>
    </div>

    <!-- –®–∞–≥ 2: –°–∏–º–ø—Ç–æ–º—ã -->
    <div class="step" id="step-symptoms">
      <h3>2. –í—ã–±–µ—Ä–∏—Ç–µ —Å–∏–º–ø—Ç–æ–º—ã:</h3>
      <div id="symptoms-buttons" style="margin-top: 15px; text-align: center;"></div>
      <button class="btn btn-wide btn-secondary" onclick="goToStep('step-age')">‚Üê –ù–∞–∑–∞–¥</button>
      <button class="btn btn-wide" id="btn-get-advice" onclick="showAdvice()" disabled>–ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é</button>
    </div>

    <!-- –®–∞–≥ 3: –†–µ–∑—É–ª—å—Ç–∞—Ç -->
    <div class="step" id="step-result">
      <h3>3. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:</h3>
      <div class="result" id="advice-text"></div>
      <button class="btn btn-wide back-btn" onclick="resetAndGoBack()">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
    </div>

    <p class="warning">‚ùóÔ∏è –≠—Ç–æ –Ω–µ –∑–∞–º–µ–Ω–∞ –≤—Ä–∞—á—É. –ü—Ä–∏ —Å–æ–º–Ω–µ–Ω–∏—è—Ö ‚Äî —Å—Ä–æ—á–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É!</p>
  </div>

  <script>
    let userAge = null;
    const selectedSymptoms = new Set();

    const SYMPTOMS = [
      { id: 'headache', label: '–ì–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å' },
      { id: 'fever', label: '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞' },
      { id: 'abdomen_right', label: '–ë–æ–ª—å –≤ –ø—Ä–∞–≤–æ–º –±–æ–∫—É' },
      { id: 'abdomen_left', label: '–ë–æ–ª—å –≤ –ª–µ–≤–æ–º –±–æ–∫—É' },
      { id: 'nausea', label: '–¢–æ—à–Ω–æ—Ç–∞' },
      { id: 'arm_leg_pain', label: '–ë–æ–ª—å –≤ —Ä—É–∫–µ/–Ω–æ–≥–µ' },
      { id: 'rash', label: '–í—ã—Å—ã–ø–∞–Ω–∏—è –Ω–∞ –∫–æ–∂–µ' },
      { id: 'weakness', label: '–°–ª–∞–±–æ—Å—Ç—å' }
    ];

    const KNOWLEDGE = [
      {
        symptoms: ['fever', 'headache', 'nausea'],
        adult: '–í–æ–∑–º–æ–∂–Ω–æ, –≥—Ä–∏–ø–ø –∏–ª–∏ –û–†–í–ò. –û—Ç–¥—ã—Ö, –ø–∏—Ç—å—ë, –∏–∑–º–µ—Ä—è–π—Ç–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É. –ü—Ä–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ –≤—ã—à–µ 38.5¬∞C ‚Äî –∂–∞—Ä–æ–ø–æ–Ω–∏–∂–∞—é—â–µ–µ. –ï—Å–ª–∏ —Å–∏–º–ø—Ç–æ–º—ã –Ω–µ —É–ª—É—á—à–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ 2‚Äì3 –¥–Ω—è ‚Äî –∫ –≤—Ä–∞—á—É.',
        child: '–£ —Ä–µ–±—ë–Ω–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ + –≥–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å + —Ç–æ—à–Ω–æ—Ç–∞ ‚Äî —ç—Ç–æ —Ç—Ä–µ–≤–æ–∂–Ω—ã–π —Å–∏–≥–Ω–∞–ª! –ù–µ –¥–∞–≤–∞–π—Ç–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ –±–µ–∑ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏. –°—Ä–æ—á–Ω–æ –≤—ã–∑–æ–≤–∏—Ç–µ –ø–µ–¥–∏–∞—Ç—Ä–∞ –∏–ª–∏ —Å–∫–æ—Ä—É—é.'
      },
      {symptoms: ['abdomen_right', 'fever', 'nausea'],
        adult: '‚ö†Ô∏è –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–ø–ø–µ–Ω–¥–∏—Ü–∏—Ç –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–µ—á–µ–Ω—å—é/–∂–µ–ª—á–Ω—ã–º. –ù–ï –ø—Ä–∏–Ω–∏–º–∞–π—Ç–µ –æ–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–µ–µ! –°—Ä–æ—á–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤—Ä–∞—á—É –∏–ª–∏ –≤—ã–∑–æ–≤–∏—Ç–µ —Å–∫–æ—Ä—É—é.',
        child: '‚ö†Ô∏è –£ —Ä–µ–±—ë–Ω–∫–∞ –±–æ–ª—å –≤ –ø—Ä–∞–≤–æ–º –±–æ–∫—É + —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ ‚Äî –≤–æ–∑–º–æ–∂–µ–Ω –∞–ø–ø–µ–Ω–¥–∏—Ü–∏—Ç. –≠—Ç–æ —ç–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è! –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –≤—ã–∑—ã–≤–∞–π—Ç–µ —Å–∫–æ—Ä—É—é –ø–æ–º–æ—â—å.'
      },
      {
        symptoms: ['headache'],
        adult: '–û—Ç–¥—ã—Ö, –ø—Ä–æ–≤–µ—Ç—Ä–∏—Ç–µ –ø–æ–º–µ—â–µ–Ω–∏–µ, –≤—ã–ø–µ–π—Ç–µ –≤–æ–¥—ã. –ú–æ–∂–Ω–æ –ø—Ä–∏–Ω—è—Ç—å –∏–±—É–ø—Ä–æ—Ñ–µ–Ω –∏–ª–∏ –ø–∞—Ä–∞—Ü–µ—Ç–∞–º–æ–ª. –ï—Å–ª–∏ –≥–æ–ª–æ–≤–Ω–∞—è –±–æ–ª—å –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–æ–ª—å—à–µ 24 —á–∞—Å–æ–≤ ‚Äî –∫ –≤—Ä–∞—á—É.',
        child: '–î–∞–π—Ç–µ —Ä–µ–±—ë–Ω–∫—É –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –≤ —Ç–∏—à–∏–Ω–µ. –ù–µ –¥–∞–≤–∞–π—Ç–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ –±–µ–∑ —Å–æ–≤–µ—Ç–∞ –≤—Ä–∞—á–∞. –ï—Å–ª–∏ –±–æ–ª—å —Å–∏–ª—å–Ω–∞—è –∏–ª–∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è ‚Äî –ø–æ–∫–∞–∂–∏—Ç–µ –ø–µ–¥–∏–∞—Ç—Ä—É.'
      },
      {
        symptoms: ['fever'],
        adult: '–ü–µ–π—Ç–µ –≤–æ–¥—É, –æ—Ç–¥—ã—Ö–∞–π—Ç–µ. –ü—Ä–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ –≤—ã—à–µ 38.5¬∞C ‚Äî –∂–∞—Ä–æ–ø–æ–Ω–∏–∂–∞—é—â–µ–µ. –ï—Å–ª–∏ –¥–µ—Ä–∂–∏—Ç—Å—è –±–æ–ª—å—à–µ 3 –¥–Ω–µ–π ‚Äî –∫ –≤—Ä–∞—á—É.',
        child: '–£ —Ä–µ–±—ë–Ω–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ ‚Äî —Å–ª–µ–¥–∏—Ç–µ –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º. –ù–µ –∫—É—Ç–∞–π—Ç–µ, –¥–∞–π—Ç–µ –ø–∏—Ç—å. –ü—Ä–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ –≤—ã—à–µ 38¬∞C –∏–ª–∏ –≤—è–ª–æ—Å—Ç–∏ ‚Äî –≤—ã–∑–æ–≤–∏—Ç–µ –≤—Ä–∞—á–∞.'
      },
      {
        symptoms: ['arm_leg_pain'],
        adult: '–í–æ–∑–º–æ–∂–Ω–æ, —É—à–∏–± –∏–ª–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ. –û–±–µ—Å–ø–µ—á—å—Ç–µ –ø–æ–∫–æ–π –∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏. –ü—Ä–∏ —Å–∏–ª—å–Ω–æ–π –±–æ–ª–∏, –æ—Ç–µ–∫–µ –∏–ª–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–≤–∏–≥–∞—Ç—å ‚Äî –∫ –≤—Ä–∞—á—É (–∏—Å–∫–ª—é—á–∏—Ç—å –ø–µ—Ä–µ–ª–æ–º –∏–ª–∏ —Ç—Ä–æ–º–±).',
        child: '–£ —Ä–µ–±—ë–Ω–∫–∞ –±–æ–ª—å –≤ –∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏ ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, —Ç—Ä–∞–≤–º–∞. –ù–µ –¥–∞–≤–∞–π—Ç–µ –æ–±–µ–∑–±–æ–ª–∏–≤–∞—é—â–µ–µ. –ü–æ–∫–∞–∂–∏—Ç–µ –≤—Ä–∞—á—É, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Ä–µ–±—ë–Ω–æ–∫ –Ω–µ –Ω–∞—Å—Ç—É–ø–∞–µ—Ç –Ω–∞ –Ω–æ–≥—É –∏–ª–∏ –Ω–µ –¥–≤–∏–≥–∞–µ—Ç —Ä—É–∫–æ–π.'
      },
      {
        symptoms: ['rash'],
        adult: '–ù–µ —á–µ—à–∏—Ç–µ! –í–æ–∑–º–æ–∂–Ω–∞ –∞–ª–ª–µ—Ä–≥–∏—è –∏–ª–∏ –∏–Ω—Ñ–µ–∫—Ü–∏—è. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–µ—Ä–º–∞—Ç–æ–ª–æ–≥—É. –ü—Ä–∏ –∑—É–¥–µ ‚Äî –º–æ–∂–Ω–æ –ø—Ä–∏–Ω—è—Ç—å –∞–Ω—Ç–∏–≥–∏—Å—Ç–∞–º–∏–Ω–Ω–æ–µ (–µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏–π).',
        child: '–í—ã—Å—ã–ø–∞–Ω–∏—è —É —Ä–µ–±—ë–Ω–∫–∞ ‚Äî –≤–æ–∑–º–æ–∂–Ω–∞ –≤–µ—Ç—Ä—è–Ω–∫–∞, –∫–æ—Ä—å –∏–ª–∏ –∞–ª–ª–µ—Ä–≥–∏—è. –ù–µ –∑–∞–Ω–∏–º–∞–π—Ç–µ—Å—å —Å–∞–º–æ–ª–µ—á–µ–Ω–∏–µ–º! –ü–æ–∫–∞–∂–∏—Ç–µ –ø–µ–¥–∏–∞—Ç—Ä—É –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ.'
      },
      {
        symptoms: ['weakness', 'fever'],
        adult: '–û—Ä–≥–∞–Ω–∏–∑–º –±–æ—Ä–µ—Ç—Å—è —Å –∏–Ω—Ñ–µ–∫—Ü–∏–µ–π. –û—Ç–¥—ã—Ö, –ø–∏—Ç—å—ë, –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ. –ü—Ä–∏ —Å–∏–ª—å–Ω–æ–π —Å–ª–∞–±–æ—Å—Ç–∏ –∏–ª–∏ –æ–¥—ã—à–∫–µ ‚Äî —Å—Ä–æ—á–Ω–æ –∫ –≤—Ä–∞—á—É.',
        child: '–°–ª–∞–±–æ—Å—Ç—å + —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —É —Ä–µ–±—ë–Ω–∫–∞ ‚Äî –ø–æ–≤–æ–¥ –¥–ª—è –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–∞. –í—ã–∑–æ–≤–∏—Ç–µ –≤—Ä–∞—á–∞ –Ω–∞ –¥–æ–º.'
      }
    ];

    function goToStep(stepId) {
      document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
      document.getElementById(stepId).classList.add('active');
    }

    function selectAge(age) {
      userAge = age;
      renderSymptoms();
      goToStep('step-symptoms');
    }

    function renderSymptoms() {
      const container = document.getElementById('symptoms-buttons');
      container.innerHTML = '';
      SYMPTOMS.forEach(sym => {
        const btn = document.createElement('button');
        btn.className = 'btn';
        btn.textContent = sym.label;
        btn.onclick = () => toggleSymptom(sym.id, btn);
        container.appendChild(btn);
      });
      updateGetAdviceButton();
    }

    function toggleSymptom(symptomId, button) {
      if (selectedSymptoms.has(symptomId)) {
        selectedSymptoms.delete(symptomId);
        button.classList.remove('selected');
      } else {
        selectedSymptoms.add(symptomId);
        button.classList.add('selected');
      }
      updateGetAdviceButton();
    }

    function updateGetAdviceButton() {
      document.getElementById('btn-get-advice').disabled = selectedSymptoms.size === 0;
    }

    function findBestAdvice() {
      let bestMatch = null;
      let maxMatch = 0;

      for (const rule of KNOWLEDGE) {
        const ruleSet = new Set(rule.symptoms);
        const matches = [...selectedSymptoms].filter(s => ruleSet.has(s)).length;
        if (matches === ruleSet.size && matches > maxMatch) {
          bestMatch = rule;
          maxMatch = matches;
        }
      }

      if (!bestMatch) {
        for (const rule of KNOWLEDGE) {
          const ruleSet = new Set(rule.symptoms);
          const matches = [...selectedSymptoms].filter(s => ruleSet.has(s)).length;
          if (matches > 0 && matches > maxMatch) {
            bestMatch = rule;
            maxMatch = matches;
          }
        }
      }

      if (bestMatch) {
        return userAge === 'child' ? bestMatch.child : bestMatch.adult;}

      // fallback
      if (selectedSymptoms.has('fever')) {
        return userAge === 'child'
          ? '–£ —Ä–µ–±—ë–Ω–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ ‚Äî —Å–ª–µ–¥–∏—Ç–µ –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º. –ù–µ –∫—É—Ç–∞–π—Ç–µ, –¥–∞–π—Ç–µ –ø–∏—Ç—å. –ü—Ä–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ –≤—ã—à–µ 38¬∞C ‚Äî –≤—ã–∑–æ–≤–∏—Ç–µ –≤—Ä–∞—á–∞.'
          : '–ü–µ–π—Ç–µ –≤–æ–¥—É, –æ—Ç–¥—ã—Ö–∞–π—Ç–µ. –ü—Ä–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ –≤—ã—à–µ 38.5¬∞C ‚Äî –∂–∞—Ä–æ–ø–æ–Ω–∏–∂–∞—é—â–µ–µ. –ï—Å–ª–∏ –¥–µ—Ä–∂–∏—Ç—Å—è –±–æ–ª—å—à–µ 3 –¥–Ω–µ–π ‚Äî –∫ –≤—Ä–∞—á—É.';
      } else if (selectedSymptoms.has('headache')) {
        return userAge === 'child'
          ? '–î–∞–π—Ç–µ —Ä–µ–±—ë–Ω–∫—É –æ—Ç–¥–æ—Ö–Ω—É—Ç—å. –ù–µ –¥–∞–≤–∞–π—Ç–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ –±–µ–∑ —Å–æ–≤–µ—Ç–∞ –≤—Ä–∞—á–∞.'
          : '–û—Ç–¥—ã—Ö, –≤–æ–¥–∞, –ø—Ä–æ–≤–µ—Ç—Ä–∏–≤–∞–Ω–∏–µ. –ú–æ–∂–Ω–æ –∏–±—É–ø—Ä–æ—Ñ–µ–Ω. –ï—Å–ª–∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç 24—á ‚Äî –∫ –≤—Ä–∞—á—É.';
      } else {
        return '–û–±—â–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –æ–±–µ—Å–ø–µ—á—å—Ç–µ –ø–æ–∫–æ–π, –ø–µ–π—Ç–µ –≤–æ–¥—É, –Ω–∞–±–ª—é–¥–∞–π—Ç–µ –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º. –ü—Ä–∏ —É—Ö—É–¥—à–µ–Ω–∏–∏ ‚Äî —Å—Ä–∞–∑—É –∫ –≤—Ä–∞—á—É.';
      }
    }

    function showAdvice() {
      const advice = findBestAdvice();
      document.getElementById('advice-text').textContent = advice;
      goToStep('step-result');
    }

    function resetAndGoBack() {
      selectedSymptoms.clear();
      userAge = null;
      goToStep('step-age');
    }
  </script>
</body>
</html>